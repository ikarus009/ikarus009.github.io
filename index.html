<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Catálogo de Productos</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
</head>
<body>
  <div class="container">
    <h1>Catálogo de Productos</h1>

    <!-- Cuestionario -->
    <div class="row">
      <div class="col-md-6">
        <h2>Cuestionario</h2>
        <form>
          <div class="form-group">
            <label for="sexo">Sexo:</label>
            <select class="form-control" id="sexo">
              <option value="hombre">Hombre</option>
              <option value="mujer">Mujer</option>
            </select>
          </div>
          <div class="form-group">
            <label for="edad">Edad:</label>
            <input type="number" class="form-control" id="edad" min="1" max="128">
          </div>
          <div class="form-group">
            <label for="estadoAnimo">Estado de ánimo:</label>
            <select class="form-control" id="estadoAnimo">
              <option value="feliz">Feliz</option>
              <option value="neutral">Neutral</option>
              <option value="triste">Triste</option>
              <option value="asco">Asco</option>
              <option value="enojado">Enojado</option>
              <option value="miedo">Miedo</option>
              <option value="sorpresa">Sorpresa</option>
            </select>
          </div>
          <div class="form-group">
            <label for="raza">Raza:</label>
            <select class="form-control" id="raza">
              <option value="blanco">Blanco</option>
              <option value="hispano">Hispano Latino</option>
              <option value="indio">Indio</option>
              <option value="asiatico">Asiático</option>
              <option value="negro">Negro</option>
              <option value="orienteMedio">Oriente Medio</option>
            </select>
          </div>
        </form>
      </div>
    </div>

    <!-- Barra de navegación -->
    <nav>
      <ul class="nav nav-tabs">
        <li class="nav-item">
          <a class="nav-link" href="#" onclick="filtrarProductos('BEBIDAS ALHOLICAS')">BEBIDAS ALHOLICAS</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#" onclick="filtrarProductos('COMIDAS')">COMIDAS</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#" onclick="filtrarProductos('BEBIDAS NO ALHOLICAS')">BEBIDAS NO ALHOLICAS</a>
        </li>
        <li class="nav -item">
          <a class="nav-link" href="#" onclick="filtrarProductos('CIGARROS')">CIGARROS</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#" onclick="filtrarProductos('PIQUEOS Y SNACKS')">PIQUEOS Y SNACKS</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#" onclick="filtrarProductos('CONFITERIA')">CONFITERIA</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#" onclick="filtrarProductos('HELADOS')">HELADOS</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#" onclick="filtrarProductos('ABARROTES')">ABARROTES</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#" onclick="filtrarProductos('EMBUTIDOS, LÁCTEOS Y HUEVOS')">EMBUTIDOS, LÁCTEOS Y HUEVOS</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#" onclick="filtrarProductos('PANES & BISCUITS')">PANES & BISCUITS</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#" onclick="filtrarProductos('CUIDADO PERSONAL')">CUIDADO PERSONAL</a>
        </li>
      </ul>
    </nav>

    <!-- Catálogo de productos -->
    <div class="row">
      <div class="col-md-12">
        <h2>Catálogo de Productos</h2>
        <!-- Los productos se cargarán aquí mediante JavaScript -->
        <div id="productos-container" class="row"></div>
      </div>
    </div>
  </div>

  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
  <script>
    // Función para cargar los productos desde el archivo CSV
    function cargarProductos(categoria = '') {
      fetch('https://raw.githubusercontent.com/ikarus009/ikarus009.github.io/main/bdprod.csv')
        .then(response => response.text())
        .then(data => {
          const filas = data.trim().split('\n').slice(1);
          const productos = filas.map(fila => {
            const [id, categoriaProd, descripcion, precio, imagen] = fila.split(',');
            return { id, categoria: categoriaProd, descripcion, precio, imagen };
          });

          const productosContainer = document.getElementById('productos-container');
          productosContainer.innerHTML = '';
          let columnasActuales = 0;
          const productosSeleccionados = [];

          productos.forEach(producto => {
            if (categoria === '' || producto.categoria === categoria) {
              const divProducto = document.createElement('div');
              divProducto.className = 'col-md-2';

              const imgProducto = document.createElement('img');
              imgProducto.src = `/${producto.imagen}`;
              imgProducto.alt = producto.descripcion;
              imgProducto.className = 'img-fluid';

              const descProducto = document.createElement('p');
              descProducto.textContent = producto.descripcion;

              const precioProducto = document.createElement('p');
              precioProducto.textContent = `Precio: ${producto.precio}`;

              const checkboxProducto = document.createElement('input');
              checkboxProducto.type = 'checkbox';
              checkboxProducto.addEventListener('change', () => {
                if (checkboxProducto.checked) {
                  productosSeleccionados.push(producto.id);
                } else {
                  const index = productosSeleccionados.indexOf(producto.id);
                  if (index !== -1) {
                    productosSeleccionados.splice(index, 1);
                  }
                }
                console.log('Productos seleccionados:', productosSeleccionados);
              });

              divProducto.appendChild(imgProducto);
              divProducto.appendChild(descProducto);
              divProducto.appendChild(precioProducto);
              divProducto.appendChild(checkboxProducto);

              productosContainer.appendChild(divProducto);

              columnasActuales++;
              if (columnasActuales === 5) {
                const divFila = document.createElement('div');
                divFila.className = 'row';
                productosContainer.appendChild(divFila);
                columnasActuales = 0;
              }
            }
          });
        })
        .catch(error => console.error('Error al cargar el archivo CSV:', error));
    }

    function filtrarProductos(categoria) {
      cargarProductos(categoria);
    }

    // Llamar a la función para cargar todos los productos al cargar la página
    cargarProductos();
  </script>
</body>
</html>